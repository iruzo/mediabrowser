<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>mediabrowser</title>
    <link rel="stylesheet" href="/ui/css/base.css">
    <link rel="stylesheet" href="/ui/css/layout.css">
    <link rel="stylesheet" href="/ui/css/components.css">
    <link rel="stylesheet" href="/ui/css/viewer.css">
    <link rel="stylesheet" href="/ui/css/responsive.css">
</head>
<body>
    <div class="toolbar">
        <div class="nav-controls">
            <button class="toolbar-btn" onclick="goPrev()" title="Go to parent directory">prev</button>
        </div>
        <input type="text" class="search-bar" placeholder="Search files..." id="searchInput" oninput="filterBySearch(this.value)">
        <div class="grid-controls">
            <button class="toolbar-btn" onclick="decreaseGridSize()" title="Smaller grid">-</button>
            <button class="toolbar-btn" onclick="increaseGridSize()" title="Larger grid">+</button>
        </div>
        <div>
            <button class="toolbar-btn" onclick="triggerUpload()">upload</button>
            <button class="toolbar-btn" onclick="createFolder()">folder</button>
            <button class="toolbar-btn" onclick="toggleSelectionMode()" id="selectBtn">select</button>
            <select class="filter-select" onchange="changeSort(this.value)">
                <option value="name">name</option>
                <option value="date">date</option>
                <option value="size">size</option>
                <option value="type">type</option>
            </select>
            <select class="filter-select" onchange="changeFilter(this.value)">
                <option value="all">all</option>
                <option value="image">image</option>
                <option value="video">video</option>
                <option value="audio">audio</option>
                <option value="text">text</option>
            </select>
            <button class="toolbar-btn" onclick="downloadSelected()" id="downloadBtn" style="display:none">download</button>
            <button class="toolbar-btn" onclick="deleteSelected()" id="deleteBtn" style="display:none">delete</button>
            <button class="toolbar-btn" onclick="clearSelection()" id="clearBtn" style="display:none">clear</button>
        </div>
    </div>

    <div class="gallery-container">
        <div class="gallery-grid" id="galleryGrid"></div>
    </div>

    <div class="viewer" id="viewer">
        <div class="viewer-controls">
            <button class="viewer-btn" onclick="closeViewer()">close</button>
            <button class="viewer-btn" onclick="downloadCurrent()">download</button>
        </div>
        <div class="zoom-controls" id="zoomControls" style="display:none;">
            <button class="viewer-btn" onclick="zoomIn()">+</button>
            <button class="viewer-btn" onclick="zoomOut()">-</button>
            <button class="viewer-btn" onclick="moveUp()">up</button>
            <button class="viewer-btn" onclick="moveDown()">down</button>
            <button class="viewer-btn" onclick="moveLeft()">left</button>
            <button class="viewer-btn" onclick="moveRight()">right</button>
            <button class="viewer-btn" onclick="rotateLeft()" title="Rotate left 45 degrees">rleft</button>
            <button class="viewer-btn" onclick="rotateRight()" title="Rotate right 45 degrees">rright</button>
            <button class="viewer-btn" onclick="resetZoom()">reset</button>
        </div>
        <div class="loop-controls" id="loopControls" style="display:none;">
            <button class="viewer-btn" onclick="seekBackward()" title="Seek backward 1 second">-1s</button>
            <input type="text" id="loopStartInput" class="time-input" placeholder="0:00" title="Loop start time (MM:SS)" onchange="onLoopTimeChange(true)">
            <span>-</span>
            <input type="text" id="loopEndInput" class="time-input" placeholder="0:00" title="Loop end time (MM:SS)" onchange="onLoopTimeChange(false)">
            <button class="viewer-btn" onclick="clearLoop()" title="Clear loop">clear</button>
            <button class="viewer-btn" onclick="seekForward()" title="Seek forward 1 second">+1s</button>
        </div>
        <div class="nav-controls-prev">
            <button class="viewer-btn" onclick="previousMedia()">prev</button>
        </div>
        <div class="nav-controls-next">
            <button class="viewer-btn" onclick="nextMedia()">next</button>
        </div>
        <div id="viewerContent"></div>
    </div>

    <div class="context-menu" id="contextMenu">
        <div class="context-menu-item" onclick="downloadFile()">download</div>
        <div class="context-menu-item" onclick="deleteFile()">delete</div>
    </div>

    <div class="upload-progress" id="uploadProgress" style="display:none;">
        <div class="upload-progress-header">
            <span id="uploadProgressText">Uploading: 0/0</span>
        </div>
        <div class="upload-progress-files" id="uploadProgressFiles"></div>
    </div>

    <input type="file" id="fileInput" multiple onchange="handleFileSelect(this.files)">

    <script src="/ui/js/state.js"></script>
    <script src="/ui/js/utils.js"></script>
    <script src="/ui/js/navigation.js"></script>
    <script src="/ui/js/gallery.js"></script>
    <script src="/ui/js/selection.js"></script>
    <script src="/ui/js/media-viewer.js"></script>
    <script src="/ui/js/media-controls.js"></script>
    <script src="/ui/js/file-ops.js"></script>
    <script src="/ui/js/main.js"></script>
</body>
</html>
